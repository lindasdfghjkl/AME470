<!doctype html>
<html>
<head>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width, maximum-scale=1.0">
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

	<style>

	 html{
	 	overflow: scroll;
	 }
	  	html::-webkit-scrollbar {
	      width: 0px;  
	  	}

		#overlay{
		   position: fixed;
		   width: 100%;
		   height: 100%;
		   top: 0px;
		   left: 0px;
		   background: rgba(0,0,0,.7);
		}
		@keyframes infSpinning {
		    0% {transform: rotate(0deg);}
		    100% {transform: rotate(360deg);}
		}
		.aniSpin{
		  animation-name: infSpinning;
		  animation-duration: 1s;
		  animation-iteration-count: infinite;
		  transition-timing-function: linear;
		}
		#spinner{
		  color: white;
		  font-size: 50px;
		  margin: auto;
		  display: block;
		  height: 50px;
		  width: 50px;
		  text-align: center;
		  margin-top: 200px;
		}

		button{
			color: white;
			border-color: white;
		}

		#descriptionWrapper button{
			color: black;
		}

		#listWrapper a:hover, button:hover{
			cursor: pointer;
			color: #9EE7FF;
			border-color: #9EE7FF;
		}
		#listWrapper{
			background: rgba(255, 255, 255, 0.15);
			position: absolute;
			top: 80px;
			left: 10%;
			right: 35%;
			width: 25%;
			height: 75%;
			overflow-x: auto;
			overflow-y: scroll;
			padding: 20px 20px 0 20px;

		    font-family: Helvetica, Arial, sans-serif;
		    font-size: 120%;
		    color: rgba(255 , 255, 255, 0.8);
		}

		#listWrapper a{
			text-decoration: none;
			color: white;
		    font-family: Helvetica, Arial, sans-serif;
		    font-size: 100%;
		}

		#listWrapper a.active{
			color: #005E7D;
		}

		#imageWrapper{
			background: black;
			position: absolute;
			top: (35% + 80px);
			left: calc(35% + 40px);
			right: 90%;
			width: calc(55% - 40px);
			height: 55%;
		}

		#descriptionWrapper{
			background: rgba(255, 255, 255, 0.9);
			color: black;
			position: absolute;
			width: calc(55% - 80px);
			height: calc(25% - 40px);
			top: calc(50% + 100px);
			left: calc(35% + 40px);
			padding: 20px 20px 20px 20px;
			overflow-x: auto;
			overflow-y: scroll;
		    font-family: Helvetica, Arial, sans-serif;
		}

		#image{
			max-width: 100%;
			max-height: 100%;
			margin: auto;
		 	display: block;

	 	    position: absolute;
		    left: 50%;
		    top: 50%;
		    transform: translate(-50%, -50%);
		}

		#addButton {
			float: right;
			font-size: 200%;
			background-color: rgba(0,0,0,0);
			border: 1px solid;
			width: 42px;
			border-radius: 150px;
			margin-right: 10%;
		}

		#delButton {
			float: right;
			background-color: rgba(0,0,0,0);
			border: 0px;
		}

		h1 {
			color: black;
		}

		h4 {
			margin-left: 20px;
		}

		input{
			margin-left: 20px;
		}

		#renameButton{
			margin-right: 20px;
		}

		#title{
			margin-left: 20px;
		}

		#descriptionWrapper .delete{
			background-color: gray;
			color: white;
			border: 0px;
			padding: 5px 10px;
		}

		#editWrapper {
			background: rgba(255, 255, 255, .87);
			position: absolute;
			top: (35% + 75px);
			left: calc(65% + 40px);
			right: 90%;
			width: calc(25% - 40px);
			height: calc(55% - 20px);
		    font-family: Helvetica, Arial, sans-serif;
			overflow-x: scroll;
			overflow-y: scroll;
			padding-bottom: 20px;
		}

		#editWrapper button{
			color: black;
			margin-left: 20px;
		}

		#desc{
			margin-left: 20px;
		}

		#delete{
			margin-top: 20px;
			float: right;
			padding: 10px 10px;
		}

		#editDetails{
			margin-top: 20px;
			float: right;
			padding: 10px 10px;
		}

		#editImage{
			margin-top: 20px;
			float: right;
			padding: 10px 10px;
		}

		#filters{
			margin-top: 20px;
			float: right;
			padding: 10px 10px;
		}

		.clicked {
			background: #9EE7FF;
		}

		#closeEdit{
			position: absolute;
			top: 10px;
			left: calc(100% - 80px);
			font-size: 150%;
			color: black;
			border: none;
		}

		#listWrapper img.active{
			width: 100px;
		}

		#DRFrame{
			display: none;
			position: absolute;
			top: 0px;
			left: 0;
			right: 100%;
			width: 100%;
			height: 100%;
	    }

	    #save, #cancel{
	    	display: none;
	    	color: black;
	    }

	    #save {
	    	float: right;
	    }

	    #cancel {
	    	float: left;
	    }

	    #DRButtons{
	    	display: none;
	    	position: fixed;
	    	background-color: rgba(0, 0, 0, 0);
	    	left: 10px;
	    	width: calc(100% - 20px);
	    	top: 10px;
	    }

	    .fileUpload {
		    position: relative;
		    overflow: hidden;
		    margin: 10px;
		}

		.fileUpload input.upload {
		    position: absolute;
		    top: 0;
		    right: 0;
		    margin: 0;
		    padding: 0;
		    font-size: 20px;
		    cursor: pointer;
		    opacity: 0;
		    filter: alpha(opacity=0);
		}

		#descriptionWrapper button, #DRButtons button, #editWrapper button {
			border: none;
			padding: 10px;
		}

		#descriptionWrapper button:hover, #DRButtons button:hover, #editWrapper button:hover {
			background: #9EE7FF;
		}

		#filtersWrapper {
			display: none;
			background: rgba(255, 255, 255, .8);
			position: absolute;
			top: (35% + 75px);
			left: calc(73% + 30px);
			right: 90%;
			width: calc(17% - 50px);
			height: calc(55% - 30px);
		    font-family: Helvetica, Arial, sans-serif;
			overflow-x: scroll;
			overflow-y: scroll;
			padding-bottom: 20px;
			padding-left: 10px;
			padding-top: 10px;
			padding-right: 10px;
			font-size: 80%;
		}

		#filtersWrapper button {
			color: black;
			border: none;
		}

		#filtersWrapper button:hover{
			cursor: pointer;
			background: #9EE7FF;
		}

		input[type=range]::-webkit-slider-runnable-track {
		  width: 100%;
		  height: 8.4px;
		  cursor: pointer;
		  background: #005E7D;
		  border: 0.2px solid #010101;
		}

		input[type=range]::-webkit-slider-thumb {
		-webkit-appearance: none;
		  height: 5px;
		  width: 10px;
		  border-radius: 1px;
		  background: red;
		  cursor: pointer;
		  margin-top: -7px; 
		}

	</style>

	<script src='asyncReq.js'></script>
	<script src='https://code.jquery.com/jquery-3.1.1.min.js'></script>

	<script>
		var touch = null;
		var mouse = null;
		var ios = null;
		var iphone = null;
		var android = null;

		function parseUA(){
			var ua = navigator.userAgent.toLowerCase();
			if(ua.indexOf("iphone") >= 0){
				touch = true;
				mouse = false;
				ios = true;
				iphone = true;
				android = false;
			} else if (ua.indexOf("ipad") >= 0){
				touch = true;
				mouse = false;
				ios = true;
				iphone = false;
				android = false;
			} else if (ua.indexOf("android") >= 0){
				touch = true;
				mouse = false;
				ios = false;
				iphone = false;
				android = true;
			} else {
				touch = false;
				mouse = true;
				ios = false;
				iphone = false;
				android = false;
			}
			
			if (mouse){
				$("#body").addClass("mouse");
			} else{
				$("#body").addClass("touch");		
			}
		}

		function getList(){
			parseUA();
			$("#overlay").hide();
			$('#editWrapper').hide();
			$("#filtersWrapper").hide();
			var url = "./getList";
			loadFile(url, function(d){
				formatList(JSON.parse(d));
				console.log(d);
			})

			document.getElementById("uploadBtn").onchange = function () {
			    document.getElementById("uploadFile").value = this.value;
			};
		}
		
		/*function addNew(){
			var imageURL = prompt("Enter New URL");
			var id = new Date().getTime();

			var url = "./addImage" + "?id=" + id + "&imageURL=" + imageURL + "&title=Untitled&desc=No description";
			console.log(url);
			loadFile(url, function(d){
				formatList(JSON.parse(d));
			})
		}*/

		function deleteImage(index){
			var flag = confirm("Are you sure you want to delete this image?");

			if (flag){
				var url = "./deleteImage" + "?id=" + index;
				console.log(url);
				loadFile(url, function(d){
					formatList(JSON.parse(d));
				})
			}
		}

		function formatList(list){
			var markup = "";

			if (list.length == 0){
				markup = "<p style='text-align: center'> No images added </p>";
				document.getElementById("listWrapper").innerHTML = markup;
			}

			for (var i = 0; i < list.length; i++){
				var item = list[i];
				markup += "<img style='width: 60px; filter:" + "saturate(" + list[i].saturate + "%)" +
	          " brightness(" + list[i].brightness + "%)" + 
	          " contrast(" + list[i].contrast + "%)" +
	          " invert(" + list[i].invert + "%)" +
	          " hue-rotate(" + list[i].hue + "deg)" +
	          " sepia(" + list[i].sepia + "%)" +
	          " grayscale(" + list[i].grayscale + "%)" +
	          " blur(" + list[i].blur + "px)' src='" + list[i].imageURL + "'>";

				markup += "<a href='javascript:itemSelected(" + i + "); javascript:displayImage(" + list[i].id + ")' style='padding-left: 10px'>" + list[i].title + "</a>" 
					+ "<button id='delButton' onclick='deleteImage(" + list[i].id + ")'> X </button>"; 
				markup += "<hr>";
			}
			document.getElementById('listWrapper').innerHTML = markup;
		}

		function itemSelected(index){
			$("#listWrapper a, #listWrapper img").removeClass('active');
			$("#listWrapper a:nth-of-type(" + (index+1) + "), #listWrapper img:nth-of-type(" + (index+1) + ")").addClass('active');
		}

		var imageData;
		function displayImage(index){
			$("#filtersWrapper, #editWrapper").hide();

			var url = "./displayImage" + "?id=" + index + "&blur=" + blur + "&contrast=" + contrast + "&brightness=" + brightness + "&hue=" + hue + "&saturate=" + saturate + "&invert=" + invert + "&sepia=" + sepia + "&grayscale=" + grayscale;
			console.log(url);
			loadFile(url, function(d){
				imageData = JSON.parse(d);
				formatDetails(imageData);
			})
		}

		function formatDetails(list){
			var imageMU = "";
			imageMU += "<img id='image' src='" + imageData[0].imageURL + "' style='filter:" + 
			  "saturate(" + imageData[0].saturate + "%)" +
	          " brightness(" + imageData[0].brightness + "%)" + 
	          " contrast(" + imageData[0].contrast + "%)" +
	          " invert(" + imageData[0].invert + "%)" +
	          " hue-rotate(" + imageData[0].hue + "deg)" +
	          " sepia(" + imageData[0].sepia + "%)" +
	          " grayscale(" + imageData[0].grayscale + "%)" +
	          " blur(" + imageData[0].blur + "px)'>";
			document.getElementById('imageWrapper').innerHTML = imageMU;

			var descriptionMU = "";
			descriptionMU += "<button id='delete' onclick='deleteImage(" + imageData[0].id + ")'> Delete</button>";
			descriptionMU += "<button id='editDetails' onclick='showEditWrapper()'> Edit Details</button>";
			descriptionMU += "<button id='filters' onclick='showFiltersWrapper()'> Filters </button>";
			descriptionMU += "<button id='editImage' onclick='darkroom()'> Rotate/Crop </button>";


			descriptionMU += "<h1>" + imageData[0].title + "</h1>"; 
			descriptionMU += "<p>" + imageData[0].desc + "</p>";
			document.getElementById('descriptionWrapper').innerHTML = descriptionMU;


			var editMU = "";
			editMU += "<h2 style='margin-left: 20px'> Edit Details </h2>";
			editMU += "<button id='closeEdit' onclick='hideEditWrapper()'> X </button>";

			//editMU += "<h4> URL </h4><input id='imageURL' placeholder='New URL'><br>";
			//editMU += "<button onclick='editURL(" + imageData[0].id + "), updateURL()'> Enter new URL </button>";

			editMU += "<h4> Title </h4><input id='title' placeholder='New Title'><br>";
			editMU += "<button id='renameButton' onclick='rename(" + imageData[0].id + "), updateTitle()'> Enter new title </button>";

			editMU += "<h4> Description </h4><textarea id='desc' style='width: 80%; height: 20%'> </textarea>";
			editMU += "<br><button id='editDesc' onclick='editDesc(" + imageData[0].id + "), updateDesc()'> Enter new description </button>";
			document.getElementById('editWrapper').innerHTML = editMU;
		}

		function showEditWrapper(){
			$('#editWrapper').show();
			$('#filtersWrapper').hide();
			$("#editDetails").addClass("clicked");
			$("#filters").removeClass("clicked");
		}
		function hideEditWrapper(){
			$('#editWrapper').hide();
			$("#editDetails").removeClass("clicked");
		}

		function rename(index){
			var newTitle = document.getElementById("title").value;
			var url = "./rename" + "?id=" + index + "&title=" + newTitle;
			console.log(url);
			loadFile(url, function(d){
				imageData = JSON.parse(d);
				formatList(imageData);
			})
		}

		function updateTitle(){
			var newTitle = document.getElementById("title").value;
		    $('#descriptionWrapper h1').text(newTitle);
		    $('#listWrapper a.active').text(newTitle);
		}

		function editDesc(index){
			var desc = document.getElementById("desc").value;
			var url = "./editDesc" + "?id=" + index + "&desc=" + desc;
			console.log(url);
			loadFile(url, function(d){
				imageData = JSON.parse(d);
				formatDetails(imageData);
			})
		}

		function updateDesc(){
			var desc = document.getElementById("desc").value;
		    $('#descriptionWrapper p').text(desc);
		}

		function editURL(index){
			var imageURL = document.getElementById("imageURL").value;
			var url = "./editURL" + "?id=" + index + "&imageURL=" + imageURL;
			console.log(url);
			loadFile(url, function(d){
				imageData = JSON.parse(d);
				formatDetails(imageData);
			})
		}

		function updateURL(){
			var imageURL = document.getElementById("imageURL").value;
		    $('#imageWrapper img, #listWrapper img.active').attr("src", imageURL);
		}

		function darkroom(){
			$("#overlay").fadeIn().delay(6400);
			$("#overlay").fadeOut();

			$("#DRFrame, #cancel, #save").show();
			document.getElementById("DRButtons").style.display = "block";

			var url = document.getElementById("image").src;
			document.getElementById("DRFrame").src = "./demo/index.html#" + url;
			document.getElementById("DRWrapper").style.display = "block";

		    sessionStorage.setItem("isEdited", "false");
		}

		function cancelDarkroom() {
			document.getElementById("DRFrame").src = "";
			document.getElementById("DRWrapper").style.display = "none";
			$("#DRWrapper, #cancel, #save").hide();
		}

		var fileUploaded = function()
		{
		   var file = $('#theFileUploader').get(0);
		   console.log(file, typeof file);
		   var fileObj = $('#theFileUploader').get(0).files[0]
		   var filename = fileObj.name;
		   var ext = filename.split(".");
		   ext = ext[ext.length-1];
		   console.log(ext);
		   var fd = new FormData();
		   var fileInput = "s3Upload_" + new Date().getTime().toString() + "." + ext;
		   fd.append('fileInput', fileInput);
		   fd.append('input', file.files[0]);
		   fd.append('date', (new Date()).toString());
		    //fd.append('data', data);
		    var xhr = new XMLHttpRequest();
		    xhr.onreadystatechange = function(e) {  
		      if (xhr.readyState != 4) { return; }

		       //document.getElementById("preview").src = "https://s3-us-west-2.amazonaws.com/lindanguyename470/" + fileInput;
				var imageMU = "";
				imageMU += "<img id='image' src='https://s3-us-west-2.amazonaws.com/lindanguyename470/" + fileInput + "'>";
				document.getElementById('imageWrapper').innerHTML = imageMU;


				var imageURL = "https://s3-us-west-2.amazonaws.com/lindanguyename470/" + fileInput;
				var id = new Date().getTime();

				var url = "./addImage" + "?id=" + id + "&imageURL=" + imageURL + "&title=Untitled&desc=No description&blur=0&contrast=100&brightness=100&hue=0&saturate=100&invert=0&sepia=0&grayscale=0";
				console.log(url);
				loadFile(url, function(d){
					imageData = JSON.parse(d);
					formatList(imageData);
					itemSelected(imageData.length);
				})
				displayImage(id);
		    };
		    xhr.open("POST", "/uploadFile", true);
		    xhr.send(fd);
		}

		function saveImageEdit(){
		  if(sessionStorage.getItem("isEdited") == "true"){
		     var fd = new FormData();
		     var fileInput = document.getElementById("image").src.split("lindanguyename470/")[1];
		    // fileInput = fileInput.split("?")[0];
		     fd.append('fileInput', fileInput);
		     fd.append('date', (new Date()).toString());
		     fd.append('data', sessionStorage.getItem("editedImage"));
		      //fd.append('data', data);
		      var xhr = new XMLHttpRequest();
		      xhr.onreadystatechange = function(e) {  
		        if (xhr.readyState != 4) { return; }
		      
		        //cancelDarkroom();  
		        /*var imageMU = "";
				imageMU += "<img id='image' src='https://s3-us-west-2.amazonaws.com/lindanguyename470/" + fileInput + ">";
				document.getElementById('imageWrapper').innerHTML = imageMU;*/
				var url = "./displayImage" + "?id=" + imageData[0].id + "&blur=" + blur + "&contrast=" + contrast + "&brightness=" + brightness + "&hue=" + hue + "&saturate=" + saturate + "&invert=" + invert + "&sepia=" + sepia + "&grayscale=" + grayscale;
				console.log(url);
				loadFile(url, function(d){
					imageData = JSON.parse(d);
					formatDetails(imageData);
				})

				cancelDarkroom();
				 $('#listWrapper img.active').attr("src", "https://s3-us-west-2.amazonaws.com/lindanguyename470/" + fileInput);
		      };
		      xhr.open("POST", "/uploadImage", true);
		      xhr.send(fd);
		  }
		}

		function showFiltersWrapper() {
			$("#filtersWrapper").show();
			$('#editWrapper').hide();
			$("#filters").addClass("clicked");

			document.getElementById("blur").value = imageData[0].blur;
			document.getElementById("contrast").value = imageData[0].contrast;
			document.getElementById("invert").value = imageData[0].invert;
			document.getElementById("sepia").value = imageData[0].sepia;
			document.getElementById("brightness").value = imageData[0].brightness;
			document.getElementById("saturate").value = imageData[0].saturate;
			document.getElementById("hue").value = imageData[0].hue;
			document.getElementById("grayscale").value = imageData[0].grayscale;

			var brightness = document.getElementById("brightness").value + "%";
				document.getElementById("brightnessVal").innerHTML = brightness;
			var saturate = document.getElementById("saturate").value + "%";
				document.getElementById("saturateVal").innerHTML = saturate;
			var contrast = document.getElementById("contrast").value + "%";
				document.getElementById("contrastVal").innerHTML = contrast;
			var blur = document.getElementById("blur").value + "px";
				document.getElementById("blurVal").innerHTML = blur;	      
			var sepia = document.getElementById("sepia").value + "%";
				document.getElementById("sepiaVal").innerHTML = sepia;	      
			var grayscale = document.getElementById("grayscale").value + "%";
				document.getElementById("grayscaleVal").innerHTML = grayscale;
			var invert = document.getElementById("invert").value + "%";
				document.getElementById("invertVal").innerHTML = invert;
			var hue = document.getElementById("hue").value + "°";
				document.getElementById("hueVal").innerHTML = hue;
		}

		function hideFiltersWrapper() {
			$("#filtersWrapper").hide();
			$("#filters").removeClass("clicked");
		}

		function saveFilter(index){
			var blur = document.getElementById("blur").value;
			var saturate = document.getElementById("saturate").value;
			var brightness = document.getElementById("brightness").value;
			var contrast = document.getElementById("contrast").value;
			var invert = document.getElementById("invert").value;
			var hue = document.getElementById("hue").value;
			var grayscale = document.getElementById("grayscale").value;
			var sepia = document.getElementById("sepia").value;
			var filter = "saturate(" + saturate + "%)" + " brightness(" + brightness + "%)" + " contrast(" + contrast + "%)" + " invert(" + invert + "%)" + " hue-rotate(" + hue + "deg)" + " sepia(" + sepia + "%)" + " grayscale(" + grayscale + "%)" + " blur(" + blur + "px)";

			var url = "./saveFilter" + "?id=" + imageData[0].id + "&blur=" + blur + "&contrast=" + contrast + "&brightness=" + brightness + "&hue=" + hue + "&saturate=" + saturate + "&invert=" + invert + "&sepia=" + sepia + "&grayscale=" + grayscale;
			console.log(url);
			loadFile(url, function(d){
				imageData = JSON.parse(d);
				formatDetails(imageData);
			})

			hideFiltersWrapper();
			$('#listWrapper img.active').css("filter", filter);

			imageData[0].blur = blur;
			imageData[0].contrast = contrast;
			imageData[0].invert = invert;
		    imageData[0].sepia = sepia;
		    imageData[0].brightness = brightness;
			imageData[0].saturate = saturate;
			imageData[0].hue = hue;
			imageData[0].grayscale = grayscale;
		}

		function updateFilter() {
		  var filter = "saturate(" + document.getElementById("saturate").value + "%)" +
	          " brightness(" + document.getElementById("brightness").value + "%)" + 
	          " contrast(" + document.getElementById("contrast").value + "%)" +
	          " invert(" + document.getElementById("invert").value + "%)" +
	          " hue-rotate(" + document.getElementById("hue").value + "deg)" +
	          " sepia(" + document.getElementById("sepia").value + "%)" +
	          " grayscale(" + document.getElementById("grayscale").value + "%)" +
	          " blur(" + document.getElementById("blur").value + "px)";

	      $("#image").css("filter", filter);

	      var brightness = document.getElementById("brightness").value + "%";
	      	document.getElementById("brightnessVal").innerHTML = brightness;
	      var saturate = document.getElementById("saturate").value + "%";
	      	document.getElementById("saturateVal").innerHTML = saturate;
	      var contrast = document.getElementById("contrast").value + "%";
	      	document.getElementById("contrastVal").innerHTML = contrast;
	      var blur = document.getElementById("blur").value + "px";
	      	document.getElementById("blurVal").innerHTML = blur;	      
	      var sepia = document.getElementById("sepia").value + "%";
	      	document.getElementById("sepiaVal").innerHTML = sepia;	      
	      var grayscale = document.getElementById("grayscale").value + "%";
	      	document.getElementById("grayscaleVal").innerHTML = grayscale;
	      var invert = document.getElementById("invert").value + "%";
	      	document.getElementById("invertVal").innerHTML = invert;
	      var hue = document.getElementById("hue").value + "°";
	      	document.getElementById("hueVal").innerHTML = hue;
	    }

	    function cancelFilter() {
			hideFiltersWrapper();
	        $("#image").css("filter", "saturate(" + imageData[0].saturate + "%)" +
	          " brightness(" + imageData[0].brightness + "%)" + 
	          " contrast(" + imageData[0].contrast + "%)" +
	          " invert(" + imageData[0].invert + "%)" +
	          " hue-rotate(" + imageData[0].hue + "deg)" +
	          " sepia(" + imageData[0].sepia + "%)" +
	          " grayscale(" + imageData[0].grayscale + "%)" +
	          " blur(" + imageData[0].blur + "px)");
	    }
	</script>
</head>

<body onload="getList()" bgcolor="#78A0AD">
	<!-- <button id='addButton' onchange='addNew()'> + </button> -->

	<button class="fileUpload" id='addButton'>
	    <span> + </span>
	    <input type='file' id='theFileUploader' class='upload' onchange='fileUploaded()'>
    </button>

	<h1 style='margin-left:170px' align="center"><font face="Helvetica, Arial, sans-serif" color="white"> My Image Collection </font></h1>
	<div id='listWrapper'> </div>
	<div id='descriptionWrapper'> </div>
	<div id='imageWrapper'> </div>
	<div id='editWrapper'> </div>


  	<div id='DRWrapper'> 
	    <iframe crossorigin='anonymous' id='DRFrame'> </iframe>
    </div>
    <div id='DRButtons' style='position: fixed;'>
        <button id='cancel' onclick='cancelDarkroom()'> Cancel </button>
	    <button id='save' onclick='saveImageEdit()'> Save </button>
    </div>

	<div id='overlay'>
	  <div id='spinner' class='fa fa-repeat aniSpin'>
	  </div>
	</div>

    <div id="filtersWrapper"> 
	  <button onclick='cancelFilter()'> Cancel </button>
	  <button style="float: right" onclick='saveFilter()'> Save </button>

      <br><br>Brightness <div style='float: right' id="brightnessVal"></div><br>
        <input type="range" id="brightness" min="0" max="200" value="100" onchange="updateFilter()"> 
      <br><br>Contrast <div style='float: right' id="contrastVal"></div><br>
        <input type="range" id="contrast" min="0" max="200" value="100" onchange="updateFilter()">
      <br><br>Saturation <div style='float: right' id="saturateVal"></div><br>
        <input type="range" id="saturate" min="0" max="200" value="100" onchange="updateFilter()">
      <br><br>Hue <div style='float: right' id="hueVal"></div><br>
        <input type="range" id="hue" min="0" max="360" value="0" onchange="updateFilter()">
      <br><br>Invert <div style='float: right' id="invertVal"></div><br>
        <input type="range" id="invert" min="0" max="100" value="0" onchange="updateFilter()">
      <br><br>Grayscale <div style='float: right' id="grayscaleVal"></div><br>
        <input type="range" id="grayscale" min="0" max="100" value="0" onchange="updateFilter()">
      <br><br>Sepia <div style='float: right' id="sepiaVal"></div><br>
        <input type="range" id="sepia" min="0" max="100" value="0" onchange="updateFilter()">
      <br><br>Blur <div style='float: right' id="blurVal"></div><br>
        <input type="range" id="blur" min="0" max="100" value="0" onchange="updateFilter()">
    </div>

</body>
</html>